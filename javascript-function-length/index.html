<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>zju.date</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="函数也是有length属性的，函数.length 与 arguments.length的区别在于：  函数.length为函数的形参个数 arguments.length是函数被调用时实际传参的个数。  举个例子： 12345function f(a,b) &amp;#123;	console.log(arguments.length,f.length)&amp;#125;f() // 0 2f(1,2,3) /">
<meta name="keywords" content="JavaScript">
<meta property="og:type" content="article">
<meta property="og:title" content="函数中的length属性">
<meta property="og:url" content="https://zju.date/javascript-function-length/index.html">
<meta property="og:site_name" content=".">
<meta property="og:description" content="函数也是有length属性的，函数.length 与 arguments.length的区别在于：  函数.length为函数的形参个数 arguments.length是函数被调用时实际传参的个数。  举个例子： 12345function f(a,b) &amp;#123;	console.log(arguments.length,f.length)&amp;#125;f() // 0 2f(1,2,3) /">
<meta property="og:locale" content="default">
<meta property="og:updated_time" content="2017-08-16T02:25:40.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="函数中的length属性">
<meta name="twitter:description" content="函数也是有length属性的，函数.length 与 arguments.length的区别在于：  函数.length为函数的形参个数 arguments.length是函数被调用时实际传参的个数。  举个例子： 12345function f(a,b) &amp;#123;	console.log(arguments.length,f.length)&amp;#125;f() // 0 2f(1,2,3) /">
  
    <link rel="alternate" href="/atom.xml" title="." type="application/atom+xml">
  
  
    <link rel="icon" href="/css/images/banner.jpg">
  
  <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">.</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">主页</a>
        
          <a class="main-nav-link" href="/archives">归档</a>
        
      </nav>
      <div id="search-form-wrap">
        
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-javascript-function-length" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/javascript-function-length/" class="article-date">
  <time datetime="2017-05-09T01:01:07.000Z" itemprop="datePublished">2017-05-09</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      函数中的length属性
    </h1>
  

      </header>
    



    <div class="article-entry" itemprop="articleBody">
      
        <p>函数也是有length属性的，函数.length 与 arguments.length的区别在于：</p>
<ul>
<li>函数.length为函数的形参个数</li>
<li>arguments.length是函数被调用时实际传参的个数。</li>
</ul>
<p>举个例子：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">a,b</span>) </span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="built_in">arguments</span>.length,f.length)</span><br><span class="line">&#125;</span><br><span class="line">f() <span class="comment">// 0 2</span></span><br><span class="line">f(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>) <span class="comment">// 3 2</span></span><br></pre></td></tr></table></figure>
<p>到这里似乎比较清楚了，但还有一个地方需要注意，例如下面的代码：</p>
<a id="more"></a>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log((<span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">a, b, c</span>)</span>&#123;&#125;).length) <span class="comment">// 3</span></span><br><span class="line"><span class="built_in">console</span>.log((<span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">a=<span class="number">1</span>, b, c</span>)</span>&#123;&#125;).length) <span class="comment">// 0</span></span><br><span class="line"><span class="built_in">console</span>.log((<span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">a, b=<span class="number">1</span>, c</span>)</span>&#123;&#125;).length) <span class="comment">// 1</span></span><br><span class="line"><span class="built_in">console</span>.log((<span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">a, b, c=<span class="number">1</span></span>)</span>&#123;&#125;).length) <span class="comment">// 2</span></span><br></pre></td></tr></table></figure>
<p>这里的结果让人迷惑，查了下<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Function/length" target="_blank" rel="noopener">文档</a>，解释说：</p>
<blockquote>
<p>length 是函数对象的一个属性值，指该函数有多少个必须要传入的参数，那些已定义了默认值的参数不算在内，比如function（xx = 0）的length是0。与之对比的是，arguments.length 是函数被调用时实际传参的个数。</p>
</blockquote>
<p>只有1个默认值的函数，这个能够理解，但下面的为何也为0呢？</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log((<span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">a=<span class="number">1</span>, b, c</span>)</span>&#123;&#125;).length)</span><br></pre></td></tr></table></figure>
<p>后来在这篇<a href="http://docs.w3cub.com/javascript/global_objects/function/length/" target="_blank" rel="noopener">文档</a>里面找到了答案：</p>
<blockquote>
<p>length is a property of a function object, and indicates how many arguments the function expects, i.e. the number of formal parameters. This number excludes the rest parameter and only includes parameters before the first one with a default value. By contrast, arguments.length is local to a function and provides the number of arguments actually passed to the function.</p>
</blockquote>
<p>函数.length不包括rest参数，并且只计算到第一个拥有默认值的参数，这与上面运行的结果一致。那如果你就是想知道函数定义的时候留了几个参数，包括拥有默认值的参数，那该怎么办呢？答案是自己<a href="https://stackoverflow.com/questions/42899083/get-function-parameter-length-including-default-params" target="_blank" rel="noopener">解析</a>：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">countFunctionParameters</span>(<span class="params">func</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> s = func.toString();</span><br><span class="line">    <span class="keyword">var</span> index1 = s.indexOf(<span class="string">'('</span>);</span><br><span class="line">    <span class="keyword">var</span> index2 = s.indexOf(<span class="string">')'</span>);</span><br><span class="line">    <span class="keyword">return</span> s.substr(index1 + <span class="number">1</span>, index2 - index1 - <span class="number">1</span>).split(<span class="string">','</span>).length;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上面就是利用把function代码输出为字符串，然后解析得到参数的个数，在大部分场景下可以正确获取参数个数：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(countFunctionParameters(<span class="function"><span class="keyword">function</span>(<span class="params">a, b = <span class="string">'test'</span>,...c</span>) </span>&#123;&#125;)); <span class="comment">// 3</span></span><br></pre></td></tr></table></figure>
<p>不过也有缺陷，在函数的默认值里面有<code>,</code>或<code>(</code>或<code>)</code>的时候就会解析错误，例如：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(countFunctionParameters(<span class="function"><span class="keyword">function</span>(<span class="params">a, b = [<span class="string">'test'</span>,<span class="string">'nice'</span>], ...c</span>) </span>&#123;&#125;)); <span class="comment">// 4</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">3</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(countFunctionParameters(<span class="function"><span class="keyword">function</span>(<span class="params">a, b = f(</span>), ...<span class="title">c</span>) </span>&#123;&#125;)); <span class="comment">// 2</span></span><br></pre></td></tr></table></figure>
<p>如果需要更精准的参数提取方法，就只能通过强大的正则表达式来完成了，大家不妨自己试试。</p>

      
    </div>
    <footer class="article-footer">
     <a data-url="https://zju.date/javascript-function-length/" data-id="cjhq778n800aaizq3sp72lc4s" class="article-share-link">Share</a>
     
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/">JavaScript</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/call-apply-in-javascript/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          JavaScript中的call和apply
        
      </div>
    </a>
  
  
    <a href="/package.json-notes/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">package.json中包的版本语法</div>
    </a>
  
</nav>

  
</article>

</section>

        

      </div>
      <footer id="footer">
  
    <aside id="sidebar" class="outer">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Android/">Android</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Angular/">Angular</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CFA/">CFA</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CSS/">CSS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Dart/">Dart</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Database/">Database</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Docker/">Docker</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ELK/">ELK</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Elasticsearch/">Elasticsearch</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Flutter/">Flutter</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Git/">Git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTML/">HTML</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTTP/">HTTP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java/">Java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JavaScript/">JavaScript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/">Linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Mac/">Mac</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MongoDB/">MongoDB</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Nginx/">Nginx</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/学习笔记/">学习笔记</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/小程序/">小程序</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/诗歌/">诗歌</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/随笔/">随笔</a></li></ul>
    </div>
  </div>


  
</aside>
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 zju.date
      &nbsp;&nbsp;&nbsp;
      contact: <a href="mailto:zju.date@qq.com">zju.date@qq.com</a>
    </div>
  </div>
</footer>


    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">主页</a>
  
    <a href="/archives" class="mobile-nav-link">归档</a>
  
</nav>
    

<script src="//apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>
<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });

</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });

</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });

</script>

<script type="text/javascript"
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


  </div>
</body>
</html>