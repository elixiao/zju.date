<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>zju.date</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content=".">
<meta property="og:url" content="https://zju.date/page/4/index.html">
<meta property="og:site_name" content=".">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content=".">
  
    <link rel="alternate" href="/atom.xml" title="." type="application/atom+xml">
  
  
    <link rel="icon" href="/css/images/banner.jpg">
  
  <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">.</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">主页</a>
        
          <a class="main-nav-link" href="/archives">归档</a>
        
      </nav>
      <div id="search-form-wrap">
        
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-风寒和风热感冒" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/风寒和风热感冒/" class="article-date">
  <time datetime="2019-11-13T07:42:05.000Z" itemprop="datePublished">2019-11-13</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/风寒和风热感冒/">风寒与风热感冒</a>
    </h1>
  

      </header>
    



    <div class="article-entry" itemprop="articleBody">
      
        <p>感冒分风寒感冒和风热感冒，这两种感冒病因病机、症状、治疗原则及用药差别很大。风寒感冒是风寒之邪外袭、肺气失宣所致。风热感冒是风热之邪犯表、肺气失和所致。</p>
<ul>
<li><p>风寒感冒症状和疗法</p>
<p>  恶寒重、发热轻、无汗、头痛身痛、鼻塞流清涕、咳嗽吐稀白痰、口不渴或渴喜热饮、苔薄白。治疗药物：风寒感冒颗粒、感冒清热颗粒、正柴胡饮冲剂、头痛严重用川芎茶调散、咳嗽严重用通宣理肺丸。风寒感冒要多喝水、盖好被子、热水泡脚、喝姜茶，发汗有助于康复。</p>
</li>
<li><p>风热感冒症状和疗法</p>
<p>  发热重、微恶风、头胀痛、有汗、咽喉红肿疼痛、咳嗽、痰粘或黄、鼻塞黄涕、口渴喜饮、舌尖边红、苔薄白微黄。治疗药物：感冒灵颗粒、连花清瘟胶囊、柴芩清宁胶囊、维C银翘片、双黄连等。</p>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
     <a data-url="https://zju.date/风寒和风热感冒/" data-id="ckckn9ome00z6rvsemmg7dcvu" class="article-share-link">Share</a>
     
    </footer>
  </div>
  
</article>


  
    <article id="post-never-use-flutter-listtile" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/never-use-flutter-listtile/" class="article-date">
  <time datetime="2019-11-12T13:39:02.000Z" itemprop="datePublished">2019-11-12</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/never-use-flutter-listtile/">千万不要用ListTile组件</a>
    </h1>
  

      </header>
    



    <div class="article-entry" itemprop="articleBody">
      
        <div class="article-preview">
            <p>最初，在 Flutter 项目中用 ListTile 实现了列表项的布局，速度很快，而且代码比较简单，例如：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">ListTile(</span><br><span class="line">  leading: Icon(</span><br><span class="line">    Icons.account_box,</span><br><span class="line">    color: Colors.red,</span><br><span class="line">  ),</span><br><span class="line">  title: Text(</span><br><span class="line">    <span class="string">'账户'</span>,</span><br><span class="line">    textAlign: TextAlign.left,</span><br><span class="line">    style: TextStyle(</span><br><span class="line">      color: Colors.grey,</span><br><span class="line">    ),</span><br><span class="line">  ),</span><br><span class="line">  trailing: Icon(Icons.keyboard_arrow_right),</span><br><span class="line">  onTap: () &#123;</span><br><span class="line">    <span class="comment">// 响应点击事件</span></span><br><span class="line">  &#125;,</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
        </div>
        
          <p class="article-more-link">
            <a href="/never-use-flutter-listtile/#more">Read More</a>
          </p>
        
      
    </div>
    <footer class="article-footer">
     <a data-url="https://zju.date/never-use-flutter-listtile/" data-id="ckckn9ofn00pfrvsedekn7whe" class="article-share-link">Share</a>
     
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Flutter/">Flutter</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-browser-eventloop" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/browser-eventloop/" class="article-date">
  <time datetime="2019-10-31T09:15:09.000Z" itemprop="datePublished">2019-10-31</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/browser-eventloop/">浏览器中的消息队列和事件循环</a>
    </h1>
  

      </header>
    



    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="事件循环是如何产生的"><a href="#事件循环是如何产生的" class="headerlink" title="事件循环是如何产生的"></a>事件循环是如何产生的</h2><p>在浏览器中，JS 的主线程是单线程的，异步的代码被放到了任务队列中，JS 主线程不断地轮询任务队列，每次从队首取出一个任务并进行处理，从而构成了事件环。</p>
<h2 id="任务队列的类型"><a href="#任务队列的类型" class="headerlink" title="任务队列的类型"></a>任务队列的类型</h2><p>任务队列有两种，分别是宏任务（macrotask）队列和微任务（microtask）队列，用于存放不同的任务：</p>
<ul>
<li>宏任务主要有：script（用户代码）、setTimeout、setInterval、I/O、UI 交互事件、postMessage、MessageChannel 等</li>
<li>微任务主要有：Promise.then、 MutationObserver 等</li>
</ul>
<h2 id="事件环的工作流程"><a href="#事件环的工作流程" class="headerlink" title="事件环的工作流程"></a>事件环的工作流程</h2><ul>
<li>JS 引擎首先从上而下执行用户 script 代码（宏任务）</li>
<li>如果遇到 setTimeout、promise、click事件等，按照分类放入宏任务队列或微任务队列中</li>
<li>继续执行后面的代码，script 执行完毕后，会清空所有的微任务</li>
<li>微任务清空后可能会进行一次 UI 渲染（不是每次都会）</li>
<li>然后再去宏任务队列中取出一个执行，循环往复</li>
</ul>
<h2 id="图示"><a href="#图示" class="headerlink" title="图示"></a>图示</h2><p><img src="http://img.zlib.cn/blog/eventloop.svg?a=1" alt="浏览器中的事件环"></p>
<h2 id="备注"><a href="#备注" class="headerlink" title="备注"></a>备注</h2><p>其实在浏览器中，宏任务队列是可以有多个的，微任务队列只能有一个，上面的图把所有的宏任务都放到一个队列当中并不严谨，但是定时器、事件和 ajax 类型的宏任务是放到一个宏任务队列中的，还有一些其他的宏任务，<a href="https://html.spec.whatwg.org/multipage/webappapis.html#task-queue" target="_blank" rel="noopener">规范</a> 里面的原话是这么说的：</p>
<blockquote>
<p>An event loop has one or more task queues. A task queue is a set of tasks.</p>
</blockquote>
<p>这里<a href="https://blog.risingstack.com/writing-a-javascript-framework-execution-timing-beyond-settimeout" target="_blank" rel="noopener">盗用</a>一张图：</p>
<p><img src="http://img.zlib.cn/blog/task_queues.svg" alt="任务队列"></p>
<p>如果出现多个宏任务队列，应该如何取宏任务呢？这个是比较灵活的，完全交给浏览器自己来实现，规范里面不做限制，但是只要保证下面两点即可：</p>
<ul>
<li>相同来源的宏任务都放到一个宏任务队列中</li>
<li>每个宏任务队列都是按照先进先出的顺序取出</li>
</ul>
<p>规范里面也给出了说明：</p>
<blockquote>
<p>For example, a user agent could have one task queue for mouse and key events (to which the user interaction task source is associated), and another to which all other task sources are associated. Then, using the freedom granted in the initial step of the event loop processing model, it could give keyboard and mouse events preference over other tasks three-quarters of the time, keeping the interface responsive but not starving other task queues. Note that in this setup, the processing model still enforces that the user agent would never process events from any one task source out of order.</p>
</blockquote>
<p>事件循环的逻辑可以用下面的代码来描述：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> (eventLoop.waitForTask()) &#123;</span><br><span class="line">  <span class="keyword">const</span> taskQueue = eventLoop.selectTaskQueue() <span class="comment">// 选择宏任务队列</span></span><br><span class="line">  <span class="keyword">if</span> (taskQueue.hasNextTask()) &#123;</span><br><span class="line">    taskQueue.processNextTask() <span class="comment">// 取出宏任务并执行</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> microtaskQueue = eventLoop.microTaskQueue</span><br><span class="line">  <span class="keyword">while</span> (microtaskQueue.hasNextMicrotask()) &#123; <span class="comment">// 清空微任务队列</span></span><br><span class="line">    microtaskQueue.processNextMicrotask()</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (shouldRender()) &#123; <span class="comment">// 浏览器决定是否渲染，如果是，则执行下面的逻辑</span></span><br><span class="line">    applyScrollResizeAndCSS()</span><br><span class="line">    runAnimationFrames()</span><br><span class="line">    render()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a href="https://blog.risingstack.com/writing-a-javascript-framework-execution-timing-beyond-settimeout" target="_blank" rel="noopener">图示</a>如下：</p>
<p><img src="http://img.zlib.cn/blog/browser-event-loop.svg" alt="浏览器中的事件环"></p>

      
    </div>
    <footer class="article-footer">
     <a data-url="https://zju.date/browser-eventloop/" data-id="ckckn9o2c0068rvsec96bamwk" class="article-share-link">Share</a>
     
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/">JavaScript</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-webview-fontsize-too-small" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/webview-fontsize-too-small/" class="article-date">
  <time datetime="2019-10-29T02:16:37.000Z" itemprop="datePublished">2019-10-29</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/webview-fontsize-too-small/">Flutter Webview手机模式</a>
    </h1>
  

      </header>
    



    <div class="article-entry" itemprop="articleBody">
      
        <p>在 Flutter 项目中用 webview 里面开了一个网页，发现字体好小，解决方案就是通过 meta 指定 mobile 视图：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> contentBase64 = base64Encode(</span><br><span class="line">  <span class="keyword">const</span> Utf8Encoder().convert(</span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    &lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="string">    &lt;html&gt;</span></span><br><span class="line"><span class="string">      &lt;head&gt;&lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;&lt;/head&gt;</span></span><br><span class="line"><span class="string">      &lt;body style='"margin: 0; padding: 0;'&gt;</span></span><br><span class="line"><span class="string">        &lt;div&gt;</span></span><br><span class="line"><span class="string">          $htmlString</span></span><br><span class="line"><span class="string">        &lt;/div&gt;</span></span><br><span class="line"><span class="string">      &lt;/body&gt;</span></span><br><span class="line"><span class="string">    &lt;/html&gt;</span></span><br><span class="line"><span class="string">    """</span>,</span><br><span class="line">  ),</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
     <a data-url="https://zju.date/webview-fontsize-too-small/" data-id="ckckn9olk00xzrvse3gy6htb2" class="article-share-link">Share</a>
     
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Flutter/">Flutter</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-merge-maps-in-dart" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/merge-maps-in-dart/" class="article-date">
  <time datetime="2019-10-24T01:57:02.000Z" itemprop="datePublished">2019-10-24</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/merge-maps-in-dart/">Dart中合并Map的三种方式</a>
    </h1>
  

      </header>
    



    <div class="article-entry" itemprop="articleBody">
      
        <p>Dart 中合并 Map 的三种方式：</p>
<ol>
<li><p>通过 <code>addAll</code></p>
 <figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> firstMap = &#123;<span class="string">"1"</span>:<span class="string">"2"</span>&#125;;</span><br><span class="line"><span class="keyword">var</span> secondMap = &#123;<span class="string">"2"</span>:<span class="string">"3"</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> thirdMap = &#123;&#125;;</span><br><span class="line"></span><br><span class="line">thirdMap.addAll(firstMap);</span><br><span class="line">thirdMap.addAll(secondMap);</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(thirdMap);</span><br></pre></td></tr></table></figure>
</li>
<li><p>通过 <code>..</code> </p>
 <figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> thirdMap = &#123;&#125;..addAll(firstMap)..addAll(secondMap);</span><br></pre></td></tr></table></figure>
</li>
<li><p>通过 <code>...</code></p>
 <figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> firstMap = &#123;<span class="string">"1"</span>:<span class="string">"2"</span>&#125;;</span><br><span class="line"><span class="keyword">final</span> secondMap = &#123;<span class="string">"2"</span>:<span class="string">"3"</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">final</span> thirdMap = &#123;</span><br><span class="line">   ...firstMap,</span><br><span class="line">   ...secondMap,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<pre><code>注意：`...` 操作符在 sdk 2.3 及以后版本中可用 
</code></pre>
      
    </div>
    <footer class="article-footer">
     <a data-url="https://zju.date/merge-maps-in-dart/" data-id="ckckn9oe200mzrvset2nz9dqq" class="article-share-link">Share</a>
     
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Dart/">Dart</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-flutter-listview-with-header" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/flutter-listview-with-header/" class="article-date">
  <time datetime="2019-10-20T12:41:44.000Z" itemprop="datePublished">2019-10-20</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/flutter-listview-with-header/">Flutter中带header的ListView</a>
    </h1>
  

      </header>
    



    <div class="article-entry" itemprop="articleBody">
      
        <p>在 Flutter 项目中，经常会遇到在使用 ListView 的时候，需要添加一个header，例如上面是图文下面是评论。但是 Flutter ListView 组件中并没有属性可以设置 header，对于这种情况，可以先把 header 画出来，然后放到 ListView 的第一个元素即可。下面是示例代码：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">ListView.builder(</span><br><span class="line">    itemCount: data == <span class="keyword">null</span> ? <span class="number">1</span> : data.length + <span class="number">1</span>,</span><br><span class="line">    itemBuilder: (BuildContext context, <span class="built_in">int</span> index) &#123;</span><br><span class="line">        <span class="keyword">if</span> (index == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="comment">// 第一个元素渲染header</span></span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> Column(...);</span><br><span class="line">        &#125;</span><br><span class="line">        index -= <span class="number">1</span>;</span><br><span class="line">        <span class="comment">// 下面才是渲染列表</span></span><br><span class="line">        <span class="keyword">var</span> row = data[index];</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> InkWell(... <span class="keyword">with</span> row ...);</span><br><span class="line">    &#125;,</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
     <a data-url="https://zju.date/flutter-listview-with-header/" data-id="ckckn9o6h00dcrvse7kctc9ns" class="article-share-link">Share</a>
     
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Flutter/">Flutter</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-wxss-background" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/wxss-background/" class="article-date">
  <time datetime="2019-10-09T09:05:19.000Z" itemprop="datePublished">2019-10-09</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/wxss-background/">小程序wxss背景图片</a>
    </h1>
  

      </header>
    



    <div class="article-entry" itemprop="articleBody">
      
        <p>在 CSS 中我们可以用 background 添加背景图片，但是小程序中的本地资源无法在 wxss 中获取，也就是说不能像 CSS 那样通过 <code>url(/assets/xxx.png)</code> 来引用本地图片来设置背景，不过有两种折中的方案：</p>
<ol>
<li><p>把图片转成base64</p>
 <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.base64-image</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">url</span>(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAA...);</span><br><span class="line">  <span class="attribute">background-size</span>: contain;</span><br><span class="line">  <span class="attribute">background-repeat</span>: no-repeat;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<pre><code>这个[地址](janedan-base64)可以把图片在线转成 base64 格式。
</code></pre><ol>
<li><p>把本地资源上传到网络，然后引用网络图片</p>
 <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.network-image</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">url</span>(http://xxxxx);</span><br><span class="line">  <span class="attribute">background-size</span>: contain;</span><br><span class="line">  <span class="attribute">background-repeat</span>: no-repeat;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>但是上面两种方式都不尽如人意，因为转成 base64 会导致文件体积会增大，且 base64 是一大串字符，无法本地直观地看到图片；用网络图片的话，页面渲染上又会有延迟，用户体验不好。所以只能采用 <code>&lt;image&gt;</code> 组件加绝对定位的方式来模拟背景图：</p>
<p><code>&lt;image&gt;</code> 组件中的 mode 取值有：</p>
<ol>
<li><code>scaleToFill</code>：拉伸图片填满 image 元素</li>
<li><code>aspectFit</code>：保持纵横比缩放图片，长边能完全显示出来，短边有空白</li>
<li><code>aspectFill</code>：保持纵横比缩放图片，短边能完全显示出来，长边有截断</li>
<li><code>widthFix</code>：宽度不变，高度自动变化，保持原图宽高比不变</li>
</ol>
<p>但是注意上面的选项并不能达到与CSS background 属性中完全相同的效果，对应的 <code>background-size</code> 的属性有：</p>
<ol>
<li><code>auto</code>：默认值，不改变原始图片的大小。</li>
<li>px：自定义设置图片的大小，一般为成对出现例如 100px,50px,当设置一个值的时候，将其作为图片的宽度只进行等比缩放。</li>
<li>百分比：0%-100%的任意值，一般也是成对出现，当设置一个值的时候，就成了正方形了。</li>
<li><code>cover</code>：覆盖，用背景图等比例缩放填满整个容器。（推荐使用）</li>
<li><code>contain</code>：容纳，即将背景图片等比缩放至<strong>某一边紧贴容器边缘为止。</strong></li>
</ol>
<p><code>mode=aspectFill</code> 和 <code>background-size:cover</code> 的区别是前者保证图片中心位置跟容器区域重合，后者保证图片的左上角跟容器的左上角重合。</p>

      
    </div>
    <footer class="article-footer">
     <a data-url="https://zju.date/wxss-background/" data-id="ckckn9om200yprvseih31ep7j" class="article-share-link">Share</a>
     
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Flutter/">Flutter</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-flutter-listtile-notes" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/flutter-listtile-notes/" class="article-date">
  <time datetime="2019-09-12T06:25:53.000Z" itemprop="datePublished">2019-09-12</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/flutter-listtile-notes/">Flutter ListTile组件</a>
    </h1>
  

      </header>
    



    <div class="article-entry" itemprop="articleBody">
      
        <p>ListTile 示例代码：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">ListTile(</span><br><span class="line">  title: Text(<span class="string">'Horse'</span>),</span><br><span class="line">  subtitle: Text(<span class="string">'A strong animal'</span>),</span><br><span class="line">  dense: <span class="keyword">true</span>,</span><br><span class="line">  leading: CircleAvatar(</span><br><span class="line">    backgroundImage: NetworkImage(imageUrl),</span><br><span class="line">  ),</span><br><span class="line">  trailing: Icon(Icons.keyboard_arrow_right),</span><br><span class="line">  contentPadding: EdgeInsets.symmetric(horizontal: <span class="number">0.0</span>),</span><br><span class="line">  selected: <span class="keyword">true</span>,</span><br><span class="line">  onTap: ()&#123;&#125;,</span><br><span class="line">  onLongPress: ()&#123;&#125;,</span><br><span class="line">  enabled: <span class="keyword">false</span>,</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>可以看到 ListTile 有如下几个属性：</p>
<ul>
<li>title：标题</li>
<li>subtitle：子标题</li>
<li>dense：紧凑模式</li>
<li>leading：头部图标</li>
<li>trailing：尾部图标</li>
<li>contentPadding：左侧和右侧的内边距（控制不了上面和下面）</li>
<li>selected：点击之后变色</li>
<li>onTap：响应点击事件</li>
<li>onLongPress：响应长按事件</li>
<li>enabled：是否响应手势</li>
</ul>

      
    </div>
    <footer class="article-footer">
     <a data-url="https://zju.date/flutter-listtile-notes/" data-id="ckckn9o6s00dsrvse8qz1d9lz" class="article-share-link">Share</a>
     
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Flutter/">Flutter</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-webpack-external" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/webpack-external/" class="article-date">
  <time datetime="2019-08-27T09:05:09.000Z" itemprop="datePublished">2019-08-27</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/webpack-external/">webpack中的external参数</a>
    </h1>
  

      </header>
    



    <div class="article-entry" itemprop="articleBody">
      
        <div class="article-preview">
            <p>今天用 electron 集成 sqlite3 和 knex 的时候报错了：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Module not found: Error: Cannot resolve module &apos;sqlite3&apos; in xxx/node_modules/knex/lib/dialects/sqlite3</span><br></pre></td></tr></table></figure>
<p>在官方<a href="https://github.com/tgriesser/knex/issues/1128" target="_blank" rel="noopener">issue</a> 中找到了解决方案：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">externals: &#123;</span><br><span class="line">  knex: <span class="string">'commonjs knex'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>于是顺便学习一下 webpack externals 参数的含义：</p>
<blockquote>
<p>external 配置选项提供了「不从 bundle 中引用依赖」或者说叫做「从输出的 bundle 中排除依赖」的方法。防止将某些 import 包打包到 bundle 中，而是在运行时(runtime)再去从外部获取这些扩展包(external package)。</p>
</blockquote>
<p>也就是说可以让打包后的 bundle 依赖于那些存在于用户环境(consumer environment)中的依赖。举个最基本的例子：</p>
        </div>
        
          <p class="article-more-link">
            <a href="/webpack-external/#more">Read More</a>
          </p>
        
      
    </div>
    <footer class="article-footer">
     <a data-url="https://zju.date/webpack-external/" data-id="ckckn9olb00xprvse2972lxxw" class="article-share-link">Share</a>
     
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/">JavaScript</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-download-subfolder-in-github" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/download-subfolder-in-github/" class="article-date">
  <time datetime="2019-08-25T14:05:53.000Z" itemprop="datePublished">2019-08-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/download-subfolder-in-github/">github上下载单个文件夹</a>
    </h1>
  

      </header>
    



    <div class="article-entry" itemprop="articleBody">
      
        <p>git 可以 clone 子目录了，具体实现如下：</p>
<ol>
<li><p>先启用 Sparse Checkout 功能:</p>
 <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config core.sparsecheckout <span class="literal">true</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>初始化项目并添加远程仓库</p>
</li>
</ol>
<pre><code><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mkdir xxx </span><br><span class="line"><span class="built_in">cd</span> xxx</span><br><span class="line">git init</span><br><span class="line">git remote add origin  https://github.com/xxx/xxx.git <span class="comment"># 增加远端的仓库地址</span></span><br></pre></td></tr></table></figure>
</code></pre><ol>
<li><p>配置子目录</p>
 <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">"relative/folder"</span> &gt;&gt; .git/info/sparse-checkout </span><br><span class="line">git pull --depth 1 origin master</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>这样就会只下载 <code>relative/folder</code> 目录啦！</p>

      
    </div>
    <footer class="article-footer">
     <a data-url="https://zju.date/download-subfolder-in-github/" data-id="ckckn9o5400asrvse8v7rpwjx" class="article-share-link">Share</a>
     
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Git/">Git</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    <a class="extend prev" rel="prev" href="/page/3/">&laquo; Prev</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><a class="page-number" href="/page/6/">6</a><span class="space">&hellip;</span><a class="page-number" href="/page/64/">64</a><a class="extend next" rel="next" href="/page/5/">Next &raquo;</a>
  </nav>
</section>

        

      </div>
      <footer id="footer">
  
    <aside id="sidebar" class="outer">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Android/">Android</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Angular/">Angular</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CFA/">CFA</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CSS/">CSS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Dart/">Dart</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Database/">Database</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Docker/">Docker</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ELK/">ELK</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Elasticsearch/">Elasticsearch</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Flutter/">Flutter</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Git/">Git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTML/">HTML</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTTP/">HTTP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java/">Java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JavaScript/">JavaScript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/">Linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Mac/">Mac</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MongoDB/">MongoDB</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Nginx/">Nginx</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/学习笔记/">学习笔记</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/小程序/">小程序</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/诗歌/">诗歌</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/随笔/">随笔</a></li></ul>
    </div>
  </div>


  
</aside>
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 zju.date
      &nbsp;&nbsp;&nbsp;
      contact: <a href="mailto:zju.date@qq.com">zju.date@qq.com</a>
    </div>
  </div>
</footer>


    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">主页</a>
  
    <a href="/archives" class="mobile-nav-link">归档</a>
  
</nav>
    

<script src="//apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>
<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });

</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });

</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });

</script>

<script type="text/javascript"
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


  </div>
</body>
</html>